# @tidbcloud/codemirror-extension-events

Events Extensions for CodeMirror6. This extension provides 3 default events: onChange, onFocusChange and onSelectionChange.

## Installation

```shell
npm install @tidbcloud/codemirror-extension-events
```

You need to install its peer dependencies as well:

```shell
npm install @codemirror/view @codemirror/view
```

## Usage

```ts
import { EditorView } from '@codemirror/view'
import { EditorState } from '@codemirror/state'
import { onChange, onFocusChange, onSelectionChange } from '@tidbcloud/codemirror-extension-events'

const onChangeHandler = (sql: string, view: EditorView) => {
  console.log(sql, view)
}

const onFocusChangeHandler = (sql: string) => {
  console.log(sql)
}

const onSelectionChangeHandler = (selectedRange: {from: number, to: numer}) => {
  console.log(selectedRange.from, selectedRange.to)
}

const editorView = new EditorView({
  state: EditorState.create({
    doc,
    extensions: [
      onChange(onChangeHandler),
      focusChangeHelper(onFocusChangeHandler),
      onSelectionChange: (onSelectionChangeHandler)
    ]
  })
})
```

## try it
import { EmbeddedStory } from '@components/EmbeddedStory'

<EmbeddedStory src={"https://667a3273123b350008560429--tisqleditor-playground.netlify.app/?hidden=1"} initHeight={300}></EmbeddedStory>


```
// todo will display the events callback results
```